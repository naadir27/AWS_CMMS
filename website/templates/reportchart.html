<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{title}}</title>

  <!-- Icon -->
  <link rel="icon" type="image/x-icon" href="/static/images/logo.jpg">
  <link rel="shortcut icon"  type="image/x-icon" href="/static/images/favicon.ico">

  <!-- Bootstrap 5.3.0 CDN  -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

  <!-- Function to Visualise The DATA -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
          var data = google.visualization.arrayToDataTable([
              ['Machine Name', 'Total Maintenance Hours', 'Repair Hours', 'Production Loss Hours'],
              {% for row in data %}
              ['{{ row.mac_name }}', {{ row.total_break_hours }}, {{ row.repair_hours }}, {{ row.prod_loss_min/60 }}],
              {% endfor %}
          ]);

          var options = {
              chart: {
                  title: 'Maintenance Summary Graph',
                  titleTextStyle: {
                    fontSize: 18,
                    bold: true,
                    textAlign: 'center'
                  }
              },
              bars: 'vertical',
              vAxis: {format: 'decimal'},
              height: 400,
              colors: ['#1b9e77', '#d95f02', '#7570b3'],
              series: {0: { dataLabels: { format: '{v}', color: 'black', fontName: 'Arial', fontSize: 12 } }}
          };

          var chart = new google.charts.Bar(document.getElementById('chart_div'));

          chart.draw(data, google.charts.Bar.convertOptions(options));
      }
  </script>
</head>

<body>
<!-- NavBar -->
<div class="container">
  <div class="header">            
    <nav class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
    <a href="/userHome" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
      <span class="fs-4">Computerized Maintenance Management System</span>
    </a>
      <ul class="nav nav-pills">
        <li class="nav-item">
          <a href="/userHome" class="nav-link">Home</a>
        </li>
        <li class="nav-item">
          <a href="/logout" class="btn btn-outline-primary">Log Out</a>
        </li>
      </ul>                     
    </nav>
  </div>

  <!-- Data is being Visualized -->
  <div class="rounded-3 mb-4 p-5">
    <div id="chart_div"></div>
  </div>
{% include 'footer.html' %}
</body>
</html>