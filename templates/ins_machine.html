{% include 'navbar(signed).html' %}
<!-- Insert Form -->
<div class="p-4 mb-4 bg-light rounded-3">
  <div class="container-fluid py-5">
    <h1 class="display-7 fw-bold text-center mb-2">ADD MACHINE</h1>
    <form id="form-insert" action="/api/insert_mac" method="POST">
      
      <label for="inputCode" class="mb-2">Machine Code</label>
      <input type="code" name="inputCode" id="inputCode" class="form-control" placeholder="Machine Code" required autofocus/> <br>
      
      <label for="inputName" class="mb-2">Machine Name</label><br>
      <input type="name" name="inputName" id="inputName" class="form-control" placeholder="Machine Name" required autofocus/><br>
      
      <label for="inputDescription" class="mb-2">Machine Description</label>
      <input type="description" name="inputDescription" id="inputDescription" class="form-control" placeholder="Machine Description" required autofocus/>

      <label for="inputCategory" class="mb-2">Machine Category</label>
      <select class="form-control" id="inputCategory" name= "inputCategory">
        <option value="" selected="selected">Select a Category</option>
        {% for i in category %}
        <option value='{{i.mac_cat_code}}'>{{i.mac_cat_name}}</option>
        {% endfor %}
      </select><br>

      <label for="inputLoation" class="mb-2">Machine Location</label>
      <select class="form-control" id="inputLocation" name= "inputLocation" >
        <option value="" selected="selected">Select a Location</option>
        {% for i in location %}
        <option value='{{i.mac_loc_code}}'>{{i.mac_loc_name}}</option>
        {% endfor %}
      </select><br>

      <button class="btn btn-lg btn-primary btn-block" type="submit">Insert</button>      
    </form>
  </div>
</div>
{% include 'footer.html' %}

<script>

  $(document).ready($(function() {
    $('#inputCategory, #inputLocation').change(function() {
        var selectedCategory = $("#inputCategory").val();
        var selectedLocation = $("#inputLocation").val();
        console.log(selectedCategory,selectedLocation)
        $.ajax({
            data: { 
                    category: selectedCategory,
                    location: selectedLocation
                  },
        });
    });
  }));

</script>
</body>
</html>